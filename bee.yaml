context: bee

namespaces:
  $NAMESPACE:
    protected: false

helmRepos:
  ethersphere: "https://ethersphere.github.io/helm"

apps:
  geth:
    name: geth
    namespace: $NAMESPACE
    version: "0.4.1"
    chart: "ethersphere/geth-swap"
    description: "Geth"
    priority: -10
    enabled: true
    valuesFiles:
      - "helm-values/geth-swap.yaml"
    wait: true
  bootnode:
    name: bootnode
    namespace: $NAMESPACE
    description: "Bee"
    chart: "ethersphere/bee"
    version: "0.14.1"
    enabled: true
    priority: -5
    valuesFiles:
      - "helm-values/bee.yaml"
    set:
      image.repository: mrekucci/bee
      image.tag: 1.18.6-p2p-quic
      ingress.hosts[0].domain: "$NAMESPACE.staging.internal"
      ingressDebug.hosts[0].domain: "$NAMESPACE.staging.internal"
      replicaCount: 1
      beeConfig.blockchain-rpc-endpoint: ws://ethproxy.$NAMESPACE:8546
      beeConfig.bootnode: "[/dns4/bootnode-bee-0-headless.$NAMESPACE.svc.cluster.local/tcp/1634/p2p/QmaHzvd3iZduu275CMkMVZKwbsjXSyH3GJRj4UvFJApKcb, /dns4/bootnode-bee-0-headless.$NAMESPACE.svc.cluster.local/udp/1634/quic-v1/p2p/QmaHzvd3iZduu275CMkMVZKwbsjXSyH3GJRj4UvFJApKcb]"
      beeConfig.bootnode-mode: true
      libp2pSettings.enabled: true
    wait: true
  master:
    name: master
    namespace: $NAMESPACE
    description: "Bee"
    chart: "ethersphere/bee"
    version: "0.14.1"
    enabled: true
    priority: -2
    valuesFiles:
      - "helm-values/bee.yaml"
    set:
      image.repository: ethersphere/bee
      image.tag: latest
      ingress.hosts[0].domain: "$NAMESPACE.staging.internal"
      ingressDebug.hosts[0].domain: "$NAMESPACE.staging.internal"
      replicaCount: 10
      beeConfig.blockchain-rpc-endpoint: ws://ethproxy.$NAMESPACE:8546
      beeConfig.bootnode: "[/dns4/bootnode-bee-0-headless.$NAMESPACE.svc.cluster.local/tcp/1634/p2p/QmaHzvd3iZduu275CMkMVZKwbsjXSyH3GJRj4UvFJApKcb, /dns4/bootnode-bee-0-headless.$NAMESPACE.svc.cluster.local/udp/1634/quic-v1/p2p/QmaHzvd3iZduu275CMkMVZKwbsjXSyH3GJRj4UvFJApKcb]"
    wait: false
  p2p-quic:
    name: p2p-quic
    namespace: $NAMESPACE
    description: "Bee"
    chart: "ethersphere/bee"
    version: "0.14.1"
    enabled: true
    priority: -2
    valuesFiles:
      - "helm-values/bee.yaml"
    set:
      image.repository: mrekucci/bee
      image.tag: 1.18.6-p2p-quic
      ingress.hosts[0].domain: "$NAMESPACE.staging.internal"
      ingressDebug.hosts[0].domain: "$NAMESPACE.staging.internal"
      replicaCount: 10
      beeConfig.blockchain-rpc-endpoint: ws://ethproxy.$NAMESPACE:8546
      beeConfig.bootnode: "[/dns4/bootnode-bee-0-headless.$NAMESPACE.svc.cluster.local/tcp/1634/p2p/QmaHzvd3iZduu275CMkMVZKwbsjXSyH3GJRj4UvFJApKcb, /dns4/bootnode-bee-0-headless.$NAMESPACE.svc.cluster.local/udp/1634/quic-v1/p2p/QmaHzvd3iZduu275CMkMVZKwbsjXSyH3GJRj4UvFJApKcb]"
    wait: false
  ethproxy:
    name: ethproxy
    namespace: $NAMESPACE
    version: "0.1.3"
    chart: "ethersphere/ethproxy"
    description: "ethproxy"
    priority: -9
    enabled: true
    wait: true
    valuesFiles:
      - "helm-values/ethproxy.yaml"
    set:
      config.PROXY_BACKEND_ENDPOINT: ws://geth-geth-swap.$NAMESPACE:8546
      ingress.hosts[0].host: ethproxy.$NAMESPACE.staging.internal
      ingress.hosts[0].paths[0]: /
